

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; DMFTwDFT 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="tutorials.html" />
    <link rel="prev" title="DMFTwDFT documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> DMFTwDFT
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#compiling-sources">Compiling sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#external-libraries-and-executables">External libraries and executables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wannier90-library">Wannier90 library</a></li>
<li class="toctree-l2"><a class="reference internal" href="#path-variables">PATH variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compiling-library-mode-for-full-charge-self-conistent-dft-dmft-calculations-optional">Compiling library mode for full charge-self conistent DFT+DMFT calculations (OPTIONAL)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="library.html">Library mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="cite.html">How to cite</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DMFTwDFT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>DMFTwDFT is currently supported by Python 2.x. It will be transitioned to Python 3.x in the future.
The Python 2.x version does not support ionic relaxation, therefore use an already relaxed structure as input.</p>
<p>Please install the following dependencies prior to installing DMFTwDFT.</p>
<p>Python:</p>
<ul class="simple">
<li><p>matplotlib</p></li>
<li><p>numpy</p></li>
<li><p>scipy</p></li>
<li><p>weave</p></li>
<li><p>mpi4py</p></li>
<li><p>pyprocar</p></li>
<li><p>pychemia</p></li>
</ul>
<p>To install execute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">matplotlib</span> <span class="n">numpy</span> <span class="n">scipy</span> <span class="n">weave</span> <span class="n">mpi4py</span> <span class="n">pyprocar</span> <span class="n">pychemia</span>
</pre></div>
</div>
<p>NOTE:</p>
<p>PyProcar is used as a support package to find the wannier window of the correlated orbitals. It’s not necessary to be installed for DMFTwDFT.
PyChemia is required for the Python 3 version of the code which is still under development.
For the Python 2 version this is not required.</p>
<p>Libraries:</p>
<ul class="simple">
<li><p>GSL</p></li>
</ul>
<p>If not using intel compilers the following libraries should be installed:</p>
<ul class="simple">
<li><p>LAPACK</p></li>
<li><p>BLAS</p></li>
<li><p>FFTW</p></li>
</ul>
<p>The structure of the directories is as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>DMFTwDFT
        ├── bin
        ├── config
        ├── docs
        ├── examples
        ├── manuals
        ├── scripts
        ├── sphinx
        ├── support_packages
        └── sources
                ├── src
                ├── dmft_ksum
                ├── fort_kpt_tools
                └── CSC-mods
</pre></div>
</div>
<p>The following section describes the procedure to compile the different componenets required to run DMFTwDFT. Once the executables and libraries have been compiled, they should be inside the <code class="docutils literal notranslate"><span class="pre">bin</span></code> directory.</p>
<div class="section" id="compiling-sources">
<h2>Compiling sources<a class="headerlink" href="#compiling-sources" title="Permalink to this headline">¶</a></h2>
<p>First copy a desired <code class="docutils literal notranslate"><span class="pre">Makefile.in</span></code> version in the <strong>config</strong> directory to the root directory based on the compiler you wish to use. You may have to specify the locations of the gsl, lapack etc. libraries (default: /usr/local/bin).
Similarly, in the <strong>sources</strong> directory modify intel.make.inc or gfortran.make.inc accordingly.</p>
<p>To compile, execute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="o">&lt;</span><span class="n">compiler</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>where compiler = {intel, gfortran}</p>
<p>This should compile the follwing executables and libraries and copy them to the <code class="docutils literal notranslate"><span class="pre">bin</span></code> directory.</p>
<ul class="simple">
<li><p>dmft.x - This module is for achieving DMFT self-consistency. It performs the <span class="math notranslate nohighlight">\(k\)</span>-point sum and and computes the local Green’s function (G_loc.out) and hybridization function (Delta.inp).</p></li>
<li><p>dmft_dos.x - Performs DOS calculation.</p></li>
<li><p>dmft_ksum_band - Performs band structure calculation.</p></li>
<li><p>dmft_ksum_partial_band - Performs projected band structure calculation.</p></li>
<li><p>fort_kpt_tools.so - Fortran based k-points calculation module.</p></li>
</ul>
</div>
<div class="section" id="external-libraries-and-executables">
<h2>External libraries and executables<a class="headerlink" href="#external-libraries-and-executables" title="Permalink to this headline">¶</a></h2>
<p>DMFTwDFT uses the CTQMC impurity solver and Max-entropy routines developed by Professor Kristjan Haule at Rutgers University available with the <a class="reference external" href="http://hauleweb.rutgers.edu/tutorials/index.html">EDMFTF</a> package. The following libraries and programs are used:</p>
<ul class="simple">
<li><p>ctqmc</p></li>
<li><p>gaunt.so</p></li>
<li><p>gutils.so</p></li>
<li><p>skrams</p></li>
<li><p>maxent_routines.so</p></li>
</ul>
<p>If the automated compilation with setup.py is successful, these are found in <code class="docutils literal notranslate"><span class="pre">bin</span></code> directory.</p>
</div>
<div class="section" id="wannier90-library">
<h2>Wannier90 library<a class="headerlink" href="#wannier90-library" title="Permalink to this headline">¶</a></h2>
<p>DMFTwDFT requires <code class="docutils literal notranslate"><span class="pre">wannier90.x</span></code> and <code class="docutils literal notranslate"><span class="pre">w90chk2chk.x</span></code> to be in the <code class="docutils literal notranslate"><span class="pre">bin</span></code> directory. You can get them from <a class="reference external" href="http://www.wannier.org/">http://www.wannier.org/</a>. VASP should be recompiled with the Wannier90 library.</p>
</div>
<div class="section" id="path-variables">
<h2>PATH variables<a class="headerlink" href="#path-variables" title="Permalink to this headline">¶</a></h2>
<p>Finally, the location of the DMFTwDFT <code class="docutils literal notranslate"><span class="pre">bin</span></code> directory should be added to the <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">$PYTHONPATH</span></code> environmental variables in your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>.</p>
</div>
<div class="section" id="compiling-library-mode-for-full-charge-self-conistent-dft-dmft-calculations-optional">
<h2>Compiling library mode for full charge-self conistent DFT+DMFT calculations (OPTIONAL)<a class="headerlink" href="#compiling-library-mode-for-full-charge-self-conistent-dft-dmft-calculations-optional" title="Permalink to this headline">¶</a></h2>
<p>The above compilation also generates <code class="docutils literal notranslate"><span class="pre">libdmft.a</span></code> which can be used to link DMFTwDFT to DFT codes to enable full charge self-consistent DFT+DMFT calculations. Otherwise, the calculations can only be run for self-consistency within DMFT. In the case of VASP please follow the below steps to compile for self-consistency.</p>
<ol class="arabic">
<li><p>Generate libdmft.a by the Compiling sources code that will  be needed to link DMFTwDFT to DFT codes to enable full charge self-consistent DFT+DMFT calculations.</p></li>
<li><p>Change the VASP makefile.include file. Specify libraries and/or objects to be linked against, in the usual ways:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LLIBS</span> <span class="o">+=</span> <span class="o">-</span><span class="n">Lparser</span> <span class="o">-</span><span class="n">lparser</span> <span class="o">-</span><span class="n">lstdc</span><span class="o">++</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">uthpala</span><span class="o">/</span><span class="n">wannier90</span><span class="o">/</span><span class="n">wannier90</span><span class="o">-</span><span class="mf">1.2</span><span class="o">/</span><span class="n">libwannier</span><span class="o">.</span><span class="n">a</span>
 <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">uthpala</span><span class="o">/</span><span class="n">Dropbox</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">DMFTwDFT</span><span class="o">/</span><span class="n">sources</span><span class="o">/</span><span class="n">libdmft</span><span class="o">.</span><span class="n">a</span>
</pre></div>
</div>
</li>
<li><p>Before modifying the source code of VASP, we first need to install the VASP as it is. The user should follow the VASP installation instructions from the VASP web site.</p></li>
<li><p>First copy the modified mlwf.F VASP file from the sources/CSC-mods directory to the VASP source directory and install the VASP again. This step will create some dependenices for next step.</p></li>
<li><p>Next, copy the other modified/required VASP files such as charge.F,  electron.F,  main.F, and us.F from the sources/CSC-mods directory to the VASP source directory.</p></li>
<li><p>Finally, recompile VASP. Then rename this vasp executable to vaspDMFT and copy it to teh DMFTwDFT/bin directory.</p></li>
</ol>
<p>More information on the library mode can be found in the <a class="reference internal" href="library.html#labellibrary"><span class="std std-ref">Library mode</span></a> section.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorials.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="DMFTwDFT documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, The DMFTwDFT Project

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>